{"version":3,"sources":["plugins.js"],"names":[],"mappings":"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","file":"plugins.js","sourcesContent":["var $ = require('jquery');\r\nvar _ = require('underscore');\r\nvar customSelectTpl = require('templates/overall/plugins/custom_select.tpl');\r\nvar Api = require('api');\r\n\r\nvar templates = {\r\n\tcustomSelectListTpl: require('templates/overall/plugins/custom_select_list.tpl'),\r\n\tcustomSelectListPriority: require('templates/overall/plugins/custom_select_list_priority.tpl')\r\n};\r\n\r\nvar api = Api.getInstance('build/api/catalog.json');\r\n\r\nvar Helpers = require('helpers');\r\n\r\nrequire('custom-scrollbar');\r\n\r\n\r\nvar SetActiveStateAtList = function (wrapper, param) {\r\n\tvar self = this;\r\n\tthis.wrapper = $(wrapper);\r\n\tthis.input = this.wrapper.find('input');\r\n\tthis.param = param;\r\n\r\n\tthis.wrapper.on('click', '.list-item', function () {\r\n\t\tself.input.val($(this).data(self.param)).change();\r\n\t});\r\n};\r\n\r\nSetActiveStateAtList.prototype.highlight = function () {\r\n\tthis.wrapper.\r\n\tfind('[data-' + this.param + '=\"' + this.input.val() + '\"]').\r\n\t    addClass('active').\r\n\t    siblings().\r\n\t    removeClass('active');\r\n};\r\n\r\n\r\nvar SetActiveStateAtTable = function (wrapper, param) {\r\n\tvar self = this;\r\n\tthis.wrapper = $(wrapper);\r\n\tthis.input = this.wrapper.find('input');\r\n\tthis.param = param;\r\n\r\n\tthis.wrapper.on('click', '.list-item', function () {\r\n\t\tself.input.val($(this).data(self.param)).change();\r\n\t});\r\n};\r\n\r\n\r\nSetActiveStateAtTable.prototype.highlight = function () {\r\n\tvar item = this.wrapper.find('[data-' + this.param + '=\"' + this.input.val() + '\"]');\r\n\r\n\titem.siblings().removeAttr('data-active');\r\n\titem.attr('data-active', true);\r\n};\r\n\r\n\r\nvar customSelectArray = [];\r\n\r\n$.fn.customSelect = function (options) {\r\n\r\n\t// var method = method;\r\n\r\n\tif (typeof options === 'object')\r\n\t\toptions = options;\r\n\tif (typeof options === 'string') {\r\n\t\toptions = {\r\n\t\t\tmethod: options\r\n\t\t};\r\n\t}\r\n\r\n\tvar settings = $.extend(true, {}, $.fn.customSelect.defaults, options);\r\n\r\n\treturn this.each(function () {\r\n\t\tvar $wrapper = $(this),\r\n\t\t    $select  = $wrapper.find('select'),\r\n\t\t    $input   = $wrapper.find('input'),\r\n\t\t    items    = [],\r\n\t\t    data     = $wrapper.data();\r\n\r\n\r\n\t\t//set current value or placeholder\r\n\t\tif (settings.method == 'refresh') {\r\n\t\t\t$wrapper.find('.custom-select-value').text($input.data('text') || $input.val() || data.placeholder);\r\n\t\t\tif (!$wrapper[0].hasAttribute('data-search'))\r\n\t\t\t\t$wrapper.find('.custom-select-container').attr('data-selected', $input.val() || data.placeholder.toLowerCase());\r\n\t\t}\r\n\r\n\t\t//clear custom selects and destroy them\r\n\t\tif (settings.method == 'destroy') {\r\n\t\t\tcustomSelectArray = [];\r\n\t\t}\r\n\r\n\t\tif (!settings.method) {\r\n\t\t\tcustomSelectArray.push($wrapper);\r\n\t\t\t$select.hide();\r\n\r\n\t\t\t$select.find('option').each(function () {\r\n\t\t\t\titems.push(this.value);\r\n\t\t\t});\r\n\r\n\t\t\tvar tpl = _.template(customSelectTpl)({\r\n\t\t\t\tvalue: $input.val(),\r\n\t\t\t\titems: items,\r\n\t\t\t\tname: $input.data('name'),\r\n\t\t\t\tsearch: $wrapper[0].hasAttribute('data-search') || false,\r\n\t\t\t\tplaceholder: data.placeholder.toLowerCase()\r\n\t\t\t});\r\n\r\n\t\t\t$wrapper.append(tpl);\r\n\r\n\t\t\tvar $value     = $wrapper.find('.custom-select-value'),\r\n\t\t\t    $list      = $wrapper.find('.custom-select-dropdown-list'),\r\n\t\t\t    $dropdown  = $wrapper.find('.custom-select-dropdown'),\r\n\t\t\t    $container = $wrapper.find('.custom-select-container'),\r\n\t\t\t    $search    = $wrapper.find('.custom-select-dropdown-search');\r\n\r\n\t\t\t//set current value or placeholder\r\n\t\t\t$value.text($input.val() || data.placeholder);\r\n\r\n\t\t\t$wrapper.on('click', '.custom-select-value', function () {\r\n\t\t\t\tcustomSelectArray.forEach(function (item) {\r\n\t\t\t\t\tif (!$wrapper.is(item))\r\n\t\t\t\t\t\titem.removeClass('custom-select-open').find('.custom-select-dropdown').hide();\r\n\t\t\t\t});\r\n\r\n\t\t\t\t$dropdown.toggle();\r\n\t\t\t\t$wrapper.toggleClass('custom-select-open');\r\n\r\n\t\t\t\tif ($dropdown.is(':visible')) {\r\n\t\t\t\t\tapi.getResourceByUrl(settings.url).then(function (response) {\r\n\t\t\t\t\t\tvar tpl = _.template(templates[settings.template])(response);\r\n\t\t\t\t\t\t$list.html(tpl);\r\n\t\t\t\t\t\t//$list.mCustomScrollbar();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t$wrapper.on('click', '.custom-select-dropdown li', function () {\r\n\r\n\t\t\t\t$input\r\n\t\t\t\t\t.val($(this).data('text'))\r\n\t\t\t\t\t.data('text', $(this).data('text'))\r\n\t\t\t\t\t.change();\r\n\r\n\t\t\t\tif (!$wrapper[0].hasAttribute('data-search'))\r\n\t\t\t\t\t$container.attr('data-selected', $(this).data('text'));\r\n\r\n\t\t\t\t//hide all\r\n\t\t\t\tcustomSelectArray.forEach(function (item) {\r\n\t\t\t\t\titem.removeClass('custom-select-open').find('.custom-select-dropdown').hide();\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\t$search.on('keyup', function () {\r\n\t\t\t\tvar searchstr = $(this).val().toLowerCase();\r\n\t\t\t\tHelpers.searchEngine(searchstr, $list, 2);\r\n\t\t\t});\r\n\r\n\t\t}\r\n\r\n\t});\r\n};\r\n\r\n\r\n$.fn.customSelect.defaults = {\r\n\turl: ''\r\n};\r\n\r\n\r\nvar Plugins = {\r\n\tsetActiveStateAtList: SetActiveStateAtList,\r\n\tsetActiveStateAtTable: SetActiveStateAtTable\r\n};\r\n\r\nmodule.exports = Plugins;"],"sourceRoot":"/source/"}