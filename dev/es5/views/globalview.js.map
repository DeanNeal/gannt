{"version":3,"sources":["views/globalview.js"],"names":[],"mappings":"AAAA,IAAI,QAAQ,GAAW,OAAO,CAAC,UAAU,CAAC;IACtC,CAAC,GAAkB,OAAO,CAAC,QAAQ,CAAC;IACpC,OAAO,GAAY,OAAO,CAAC,SAAS,CAAC;IACrC,QAAQ,GAAW,OAAO,CAAC,gBAAgB,CAAC;IAC5C,UAAU,GAAS,OAAO,CAAC,kBAAkB,CAAC;IAC9C,YAAY,GAAO,OAAO,CAAC,+BAA+B,CAAC;IAC3D,aAAa,GAAM,OAAO,CAAC,gCAAgC,CAAC;IAC5D,QAAQ,GAAW,OAAO,CAAC,sBAAsB,CAAC;IAClD,SAAS,GAAU,OAAO,CAAC,wBAAwB,CAAC;IACpD,WAAW,GAAQ,OAAO,CAAC,4BAA4B,CAAC;IACxD,gBAAgB,GAAG,OAAO,CAAC,yBAAyB,CAAC;IACrD,OAAO,GAAY,OAAO,CAAC,oBAAoB,CAAC,CAAC;;AAErD,IAAI,UAAU,GAAG,UAAU,CAAC,MAAM,CAAC;AAC/B,WAAO,EAAE,KAAK;AACd,YAAQ,EAAE,OAAO;AACjB,aAAS,EAAE,gBAAgB;AAC3B,UAAM,EAAE;AACJ,mBAAW,EAAE,aAAa;AAC1B,cAAM,EAAO,QAAQ;AACrB,eAAO,EAAM,SAAS;AACtB,iBAAS,EAAI,WAAW;KAC3B;AACD,gBAAY,EAAE,UAAS,MAAM,EAAE;AAC3B,gBAAQ,CAAC,EAAE,CAAC,aAAa,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;KACtD;AACD,qBAAiB,EAAE,YAAW;AAC1B,YAAI,QAAQ,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC;;AAE5B,YAAI,CAAC,IAAI,CAAC,IAAI,EAAE;AACZ,gBAAI,CAAC,GAAG,CAAC,sBAAsB,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAA,UAAS,QAAQ,EAAE;AAC5D,oBAAI,CAAC,UAAU,GAAG,OAAO,CAAC,eAAe,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;AACzD,oBAAI,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,EAAE;AACnC,8BAAU,EAAE,IAAI,gBAAgB,CAAC,IAAI,CAAC,UAAU,CAAC;iBACpD,CAAC,CAAC;AACH,oBAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,EAAE,mBAAmB,CAAC,CAAC;AACtD,wBAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;aAC1B,CAAA,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;SACjB,MACG,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;;AAE3B,eAAO,QAAQ,CAAC,OAAO,EAAE,CAAC;KAC7B;AACD,SAAK,EAAE,YAAW;AACd,gBAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;KAC/C;CACJ,CAAC,CAAC;;AAEH,MAAM,CAAC,OAAO,GAAG,UAAU,CAAC","file":"views/globalview.js","sourcesContent":["var Backbone         = require('backbone'),\r\n    $                = require('jquery'),\r\n    Helpers          = require('helpers'),\r\n    BaseView         = require('views/baseview'),\r\n    RoutedView       = require('views/routedview'),\r\n    BaseListView     = require('views/elements/base_list_view'),\r\n    dashboardView    = require('views/dashboard/dashboard_view'),\r\n    treeView         = require('views/tree/tree_view'),\r\n    statsView        = require('views/stats/stats_view'),\r\n    financeView      = require('views/finance/finance_view'),\r\n    navBarCollection = require('collections/header_list'),\r\n    mainTpl          = require('templates/main.tpl');\r\n\r\nvar GlobalView = RoutedView.extend({\r\n    tagName: 'div',\r\n    template: mainTpl,\r\n    className: 'main full-size',\r\n    routes: {\r\n        'dashboard': dashboardView,\r\n        'tree'     : treeView,\r\n        'stats'    : statsView,\r\n        'finance'  : financeView\r\n    },\r\n    onInitialize: function(params) {\r\n        Backbone.on('change:page', this.changeStage, this);\r\n    },\r\n    beforeChangeStage: function() {\r\n        var deferred = $.Deferred();\r\n\r\n        if (!this.menu) {\r\n            this.api.getResousceFromCatalog('menu').then(function(response) {\r\n                this.collection = Helpers.createMenuLinks(response.data);\r\n                this.menu = this.addView(BaseListView, {\r\n                    collection: new navBarCollection(this.collection)\r\n                });\r\n                this.renderNestedView(this.menu, '.header-container');\r\n                deferred.resolve(true);\r\n            }.bind(this));\r\n        } else\r\n            deferred.resolve(true);\r\n\r\n        return deferred.promise();\r\n    },\r\n    start: function() {\r\n        document.body.appendChild(this.render().el);\r\n    }\r\n});\r\n\r\nmodule.exports = GlobalView;\r\n"],"sourceRoot":"/source/"}